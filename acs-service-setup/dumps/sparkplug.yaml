# ACS-specific deployment decisions
service: !u UUIDs.Service.ConfigDB
version: 2
objects:
  !u ConfigDB.Class.R2Class:
    !u Auth.Class.PrincipalGroup: {}
  !u UUIDs.Class.Class:
    !u UUIDs.Class.EdgeAgent:     { name: "Edge Agent" }
    !u ACS.Class.ClientRole:      { name: "Client role" }
  !u UUIDs.Class.App:
    !u Edge.App.AgentConfig:      { name: "Edge Agent config" }
  !u ACS.Class.ClientRole:
    !u Edge.Role.Monitor:         { name: "Edge Monitor for Agent" }
  !u Auth.Class.PrincipalGroup:
    !u ACS.Group.SparkplugNode:   { name: "Sparkplug Node" }
---
service: !u UUIDs.Service.Authentication
version: 1
principals:
aces:
  - principal: !u ACS.Group.SparkplugNode
    permission: !u ACS.Perm.MQTT.ParticipateAsNode
    target: !u UUIDs.Special.Self
  - principal: !u ACS.Group.SparkplugNode
    permission: !u ACS.Perm.MQTT.RepresentDevices
    target: !u UUIDs.Special.Self
  - principal: !u ACS.Group.SparkplugNode
    permission: !u ACS.Perm.MQTT.ReadAllStates
    target: !u UUIDs.Special.Null
  - principal: !u ACS.Group.SparkplugNode
    permission: !u UUIDs.Permission.ConfigDB.ReadConfig
    target: !u UUIDs.App.SparkplugAddress
groups:
  !u Edge.Role.Monitor:
    - !u ACS.Perm.MQTT.ReadNode
    - !u Edge.Perm.ReloadConfig
    - !u UUIDs.Permission.CmdEsc.Rebirth
