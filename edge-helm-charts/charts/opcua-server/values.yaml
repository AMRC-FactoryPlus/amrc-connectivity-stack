# OPC UA Server configuration
name: "opcua-server"  # Server name (required, override this)
uuid: "00000000-0000-0000-0000-000000000000"  # Server UUID (required, override this)

# Kerberos realm for local authentication
realm: "REALM.EXAMPLE.COM"  # Override this

# Cluster name for principal construction (e.g., opcua1/<cluster>/<name>)
cluster: "cluster-name"  # Override this

# Auth group to add the server account to
authGroup:
  edgeService: ""  # Auth.Class.EdgeService - set by deployment
  unsReader: "d6a4d87c-cd02-11ef-9a87-2f86ebe5ee08"  # UNS.Group.Reader - grants UNS read permissions

# Directory URL for ServiceClient service discovery
directory_url: "http://directory.namespace.svc.cluster.local"

# UNS topics to expose via OPC UA (object keyed by topic filter)
# The topic path is used directly as the OPC UA node hierarchy
# Values are currently ignored but reserved for future settings
topics: {}
# "UNS/v1/site/area/workcentre/Axes/1/Position/Actual": {}
# "UNS/v1/site/area/workcentre/Temperature/Current": {}

# OPC UA server configuration
opcua:
  port: 4840
  # Username for OPC UA client authentication
  # A random password will be auto-generated and stored in a Secret
  username: "opcua"

# Image configuration
image:
  default:
    registry: %%REGISTRY%%
    tag: %%TAG%%
    pullPolicy: %%PULLPOLICY%%
  opcua:
    repository: acs-opcua-server-edge

# Persistent storage for last-value cache
persistence:
  size: "64Mi"
  storageClass: ""

# Tolerations for pod scheduling
tolerations:
  # Tolerations to apply to pods deployed to a specific host
  specific:
    - key: factoryplus.app.amrc.co.uk/specialised
      operator: Exists
  # Tolerations to apply to floating pods
  floating: []

# This deploys to a specific host
# hostname: foo

# NodePort for external OPC UA access
# If not set, a random NodePort will be assigned
# nodePort: 30484

# Resource limits
limits:
  cpu: "100m"
  memory: "128Mi"
