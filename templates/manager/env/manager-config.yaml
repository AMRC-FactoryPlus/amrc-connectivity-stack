apiVersion: v1
kind: ConfigMap
metadata:
  name: manager-config
  namespace: {{ .Values.namespace | required "values.namespace is required!" }}
data:
  APP_NAME: {{.Values.manager.name | quote | required "values.manager.name is required!"}}
  APP_ENV: {{.Values.manager.env | quote | required "values.manager.env is required!"}}
  APP_DEBUG: {{.Values.manager.debug | quote | required "values.manager.debug is required!"}}
  VITE_BRANDING_NAME: {{.Values.manager.name | quote | required "values.manager.name is required!"}}
  MQTT_SERVER_FROM_EDGE: "mqtts://mqtt.{{.Values.baseUrl | required "values.baseUrl is required"}}:8883"
  MANAGEMENT_APP_FROM_EDGE: "https://manager.{{.Values.baseUrl | required "values.baseUrl is required"}}"
  MANAGER_SERVICE_PRINCIPAL: "HTTP/manager.{{ .Values.identity.realm | required "values.identity.realm is required!" }}"
  TRANSLATOR_NAMESPACES: {{ .Values.namespace | quote | required "values.namespace is required!" }}
  APP_URL: "https://manager.{{.Values.baseUrl | required "values.baseUrl is required"}}"
  ASSET_URL: "https://manager.{{.Values.baseUrl | required "values.baseUrl is required"}}"
  KRB_DOMAIN: {{.Values.identity.realm | quote | required "values.identity.realm is required!"}}
  SERVICE_DOMAIN: {{.Values.baseUrl | quote | required "values.baseUrl is required!"}}
  OCTANE_SERVER: "swoole"
  LOG_CHANNEL: "stdout"
  LOG_LEVEL: {{.Values.manager.logLevel | quote | required "values.manager.logLevel is required!"}}
  CACHE_DRIVER: "redis"
  SESSION_DRIVER: "redis"
  QUEUE_CONNECTION: "redis"
  SESSION_LIFETIME: "10080"
  DB_CONNECTION: "pgsql"
  DB_HOST: {{.Values.manager.database.host | required "manager.database.host is required!" | quote}}
  DB_PORT: {{.Values.manager.database.port | required "manager.database.port is required!" | quote}}
  DB_DATABASE: {{.Values.manager.database.database | required "manager.database.database is required!" | quote}}
  DB_USERNAME: {{.Values.manager.database.username | required "manager.database.username is required!" | quote}}
  REDIS_HOST: "manager-redis.{{ .Values.namespace | required "values.namespace is required!" }}.svc.cluster.local"
  REDIS_PORT: "6379"
  FILESYSTEM_CLOUD: "minio"
  MINIO_ENDPOINT: "https://data.{{.Values.baseUrl | required "values.baseUrl is required"}}"
  MINIO_KEY: {{.Values.manager.minio.key | required "manager.minio.key is required!" | quote}}
  MINIO_REGION: "us-east-1"
  SCOUT_DRIVER: "meilisearch"
  MEILISEARCH_HOST: "http://localhost:7700"
  FILE_SERVICE_ENDPOINT: "http://files.{{ .Values.namespace | required "values.namespace is required!" }}.svc.cluster.local"
  CMDESC_SERVICE_ENDPOINT: "http://cmdesc.{{ .Values.namespace | required "values.namespace is required!" }}.svc.cluster.local"
  AUTH_SERVICE_URL: "http://auth.{{ .Values.namespace | required "values.namespace is required!" }}.svc.cluster.local"
  CONFIGDB_SERVICE_URL: "http://configdb.{{ .Values.namespace | required "values.namespace is required!" }}.svc.cluster.local"
  NEW_TRANSLATION_APP_REGISTRY: {{.Values.manager.edge.registry | quote | required "values.manager.edge.registry is required!"}}
  NEW_TRANSLATION_APP_REPOSITORY: {{.Values.manager.edge.repository | quote | required "values.manager.edge.repository is required!"}}
  NEW_TRANSLATION_APP_VERSION: {{.Values.manager.edge.tag | quote | required "values.manager.edge.tag is required!"}}